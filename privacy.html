<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Privacy Policy – FretTracks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light">
  <style>
    :root{
      --brand:#0B63FF;
      --brand-dark:#0A2C6E;
      --ink:#0A0F1C;
      --muted:#667085;
      --panel:#F6F8FF;
      --bg1:#EEF3FF;
      --bg2:#FDFEFF;
      --border:#E1E6F3;
      --radius:18px;
      --shadow:0 1px 2px rgba(9,30,66,.08), 0 2px 8px rgba(9,30,66,.06);
      --toc-w: 280px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 20% -10%, var(--bg1), transparent),
        radial-gradient(900px 500px at 120% 10%, #EAF0FF, transparent),
        var(--bg2);
      line-height:1.75;
    }
    h1,h2,h3{color:var(--brand-dark); letter-spacing:.2px}
    .topbar{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--border)}
    .nav{max-width:1200px;margin:0 auto;padding:12px 20px;display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none}
    .brand img{width:36px;height:36px;border-radius:10px;box-shadow:var(--shadow)}
    .brand span{font-weight:800;color:var(--brand-dark);font-size:20px}
    .links a{color:var(--ink);text-decoration:none;padding:8px 10px;border-radius:12px}
    .links a:hover{background:#E9F0FF}
    .hero{max-width:1200px;margin:18px auto 0;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:22px;box-shadow:var(--shadow)}
    .meta{color:var(--muted);font-size:14px}
    .wrap{max-width:1200px;margin:16px auto;display:grid;grid-template-columns:var(--toc-w) 1fr;gap:20px;padding:0 20px}
    @media (max-width: 980px){ .wrap{grid-template-columns:1fr} .toc{position:relative; top:auto} }
    .toc{
      position:sticky; top:84px; align-self:start;
      background:#fff;border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:var(--shadow)
    }
    .toc h3{margin:6px 0 10px;font-size:14px;color:var(--muted);font-weight:700;text-transform:uppercase;letter-spacing:.08em}
    .toc a{display:block;color:var(--brand-dark);text-decoration:none;font-size:15px;padding:6px 8px;border-radius:10px}
    .toc a:hover{background:#F1F5FF}
    .content{
      background:#fff;border:1px solid var(--border);border-radius:18px;padding:24px;box-shadow:var(--shadow)
    }
    .prose{max-width:820px}
    .prose p{margin:12px 0}
    .prose ul, .prose ol{margin:10px 0 16px 22px}
    .footer{max-width:1200px;margin:40px auto 22px;text-align:center;color:var(--muted);font-size:14px}
    .notice{background:#F8FAFF;border:1px dashed #CFE0FF;color:#17326B;padding:10px 12px;border-radius:12px;margin:10px 0}
    code.kwd{background:#F1F5FF;border:1px solid #DFE7FF;padding:2px 6px;border-radius:8px}
  </style>
</head>
<body>
  <div class="topbar">
    <div class="nav">
      <a class="brand" href="index.html">
        <img src="logo.png" alt="FretTracks logo"><span>FretTracks</span>
      </a>
      <div class="links">
        <a href="privacy.html">Privacy</a>
        <a href="tos.html">Terms</a>
        <a href="support.html">Support</a>
      </div>
    </div>
  </div>

  <header class="hero">
    <h1>Privacy Policy</h1>
    <div class="meta">Last updated: <span id="lastUpdated"></span></div>
    <div class="notice">This page explains how FretTracks collects, uses, and protects your information.</div>
  </header>

  <main class="wrap">
    <aside class="toc">
      <h3>Contents</h3>
      <nav id="tocList"></nav>
    </aside>

    <section class="content">
      <article id="policy" class="prose">
        <!-- Your current text stays here; the script below will promote headings and bullets. -->
        <!-- BEGIN RAW POLICY (keep as text/paragraphs; do not remove) -->
        <div id="raw">
          <!-- Paste/keep your full privacy text here if needed.
               If it’s already in the file from the previous merge, leave it — the script will restructure it. -->
        </div>
        <!-- END RAW POLICY -->
      </article>
    </section>
  </main>

  <div class="footer">© <span id="year"></span> FretTracks Labs LLC</div>

  <script>
    // Fill meta
    document.getElementById('year').textContent = new Date().getFullYear();
    // Choose your actual last-updated date or use today's
    document.getElementById('lastUpdated').textContent = new Date().toLocaleDateString();

    // --- Policy formatter: promotes common headings + turns bullets into real lists ---
    (function() {
      const raw = document.getElementById('raw');
      // If there are already <h2> in the article, don't touch.
      const article = document.getElementById('policy');
      if (article.querySelector('h2')) { buildTOC(); return; }

      const text = (raw.innerText || '').trim();
      if (!text) { buildTOC(); return; }

      // Split into lines
      const lines = text.replace(/\r\n?/g, '\n').split('\n');

      // Heading keywords (case-insensitive)
      const H2S = [
        'overview','information we collect','how we use','use of information',
        'data retention','data security','children','your rights','eu/eea','california',
        'cookies','third parties','sharing','international transfers','changes','contact'
      ];

      const frag = document.createDocumentFragment();
      let ul = null, ol = null;

      function flushLists() {
        if (ul) { frag.appendChild(ul); ul = null; }
        if (ol) { frag.appendChild(ol); ol = null; }
      }

      lines.forEach((rawLine) => {
        const line = rawLine.trim();

        if (!line) { flushLists(); return; }

        // Numbered list
        if (/^\d+\./.test(line)) {
          flushLists(); // allow ol grouping separately
          if (!ol) ol = document.createElement('ol');
          const li = document.createElement('li');
          li.textContent = line.replace(/^\d+\.\s*/, '');
          ol.appendChild(li);
          return;
        }

        // Bullet list
        if (/^[-–•*]\s+/.test(line)) {
          if (!ul) ul = document.createElement('ul');
          const li = document.createElement('li');
          li.textContent = line.replace(/^[-–•*]\s+/, '');
          ul.appendChild(li);
          return;
        } else {
          flushLists();
        }

        // Possible heading
        const lower = line.toLowerCase();
        const isHeading = H2S.some(k => lower.startsWith(k));
        if (isHeading || (line.length < 80 && /:$/.test(line))) {
          const h = document.createElement('h2');
          h.textContent = line.replace(/:$/, '');
          frag.appendChild(h);
          return;
        }

        // Default paragraph
        const p = document.createElement('p');
        p.textContent = line;
        frag.appendChild(p);
      });

      flushLists();
      raw.replaceWith(frag);

      buildTOC();

      function slugify(s){return s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');}
      function buildTOC(){
        const toc = document.getElementById('tocList');
        toc.innerHTML = '';
        const heads = article.querySelectorAll('h2');
        if (!heads.length) {
          // Fallback: inject a single heading so TOC isn’t empty
          const h = document.createElement('h2'); h.textContent = 'Overview'; article.prepend(h);
        }
        article.querySelectorAll('h2').forEach(h => {
          if (!h.id) h.id = slugify(h.textContent);
          const a = document.createElement('a');
          a.href = '#' + h.id;
          a.textContent = h.textContent;
          toc.appendChild(a);
        });
      }
    })();
  </script>
</body>
</html>
